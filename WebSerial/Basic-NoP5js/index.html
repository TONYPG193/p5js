<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Simple Web Serial I/O Demo</title>
</head>

<body>
  <script src="serial.js"></script>
  <h1>Web Serial Demo</h1>
  This simple demo uses a slider to send a number between 0-255 to your connected serial device (e.g., a CPX or Arduino).
  
  <p>To begin, read the instructions below and then click this "Connect" button.</p>
  
  <p></p>
  <button id="connect-button" onclick="onConnectButtonClick()">Connect via Serial Port</button>
  <div id="interactive-controls" style="display:none">
      <h1>Slider value: <span id="slider_value">0</span></h1>
      <input id="slider" type="range" min="0" max="255" value="128" onchange="onSliderValueChanged(this, event)" />
  </div>
  <div id="error_message"></div>
  
  <div id="instructions">
    <h1>Instructions</h1>
    For this demo to work, there are two requirements:
    <ol>
      <li>First, you must run Chrome and enable the 'experimental-web-platform-features' flag (see below)</li>
      <li>Second, you must be running a supported program on your Adafruit CPX or Arduino</li>
    </ol>
    We expand on each below.

    <h2>Chrome Setup</h2>
    To check to see if your current version of Chrome supports WebSerial:
    <ol>
      <li>Open Chrome to any webpage</li>
      <li>Open the dev console (cmd-option-i on Mac or ctrl-shift-i on Windows) and type: > navigator.serial</li>
      <li>If you see something like "Serial {onconnect:null, ondisconnect: null}" then it worked! 
          If, instead, it says "undefined", then it didn't work (see below)
      </li>
    </ol>

    To enable web serial support in Chrome:
    <ol>
      <li>First, type chrome://flags in the address bar</li>
      <li>Then, in the search box, type "experimental-web-platform-features"</li>
      <li>This flag should be set to "Enabled"</li>
      <li>Restart your browser and follow the steps above to ensure that it worked</li>
    </ol>

    <h2>CPX/Arduino</h2>
    To see the full demo, you must have your CPX or Arduino plugged in and running code that
    listens to the serial port, parses it, and does something. We've created a few demos:

    <h3>CPX Demos</h3>
    <ol>
      <li><a href="https://github.com/makeabilitylab/p5js/tree/master/WebSerial/Basic-NoP5js/AdafruitCpx/SerialColorNeoPixels">SerialColorNeoPixels</a></li>
      <li><a href="https://github.com/makeabilitylab/p5js/tree/master/WebSerial/Basic-NoP5js/AdafruitCpx/SerialFadeNeoPixels">SerialFadeNeoPixels</a></li>
    </ol>


  </div>
</body>

</html>